<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sakura Quest</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; overflow: hidden; }
        @keyframes pulse-hub {
            0%, 100% { transform: scale(1); box-shadow: 0 4px 14px 0 rgba(255, 107, 138, 0.39); }
            50% { transform: scale(1.05); box-shadow: 0 6px 20px 0 rgba(255, 107, 138, 0.5); }
        }
        @keyframes pulse-milestone {
            0%, 100% { transform: scale(1.1); }
            50% { transform: scale(1.3); }
        }
        .current-milestone-pulse { animation: pulse-milestone 1.5s infinite; }
        .sakura-fall-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; overflow: hidden; }
        .sakura-petal { position: absolute; width: 10px; height: 10px; background-color: #FFB7C5; border-radius: 50% 0; animation: fall 12s linear infinite; }
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- D·ªÆ LI·ªÜU GI·∫¢ L·∫¨P ---
        const MENU_ITEMS = [ { id: "Roadmap", label: "L·ªô tr√¨nh", icon: "üó∫Ô∏è" }, { id: "Practice", label: "Luy·ªán t·∫≠p", icon: "üèãÔ∏è" }, { id: "Leaderboard", label: "X·∫øp h·∫°ng", icon: "üèÜ" }, { id: "Shop", label: "C·ª≠a h√†ng", icon: "üõçÔ∏è" }, { id: "Community", label: "C·ªông ƒë·ªìng", icon: "üó£Ô∏è" } ];
        const ROADMAP_LEVELS = [
            { id: "N5", label: "Chinh ph·ª•c N5", icon: "üå±", color: "#4CAF50", milestoneCount: 100 },
            { id: "N4", label: "Chinh ph·ª•c N4", icon: "üå≥", color: "#81C784", milestoneCount: 80 },
            { id: "N3", label: "Chinh ph·ª•c N3", icon: "‚õ∞Ô∏è", color: "#2196F3", milestoneCount: 60 },
            { id: "N2", label: "Chinh ph·ª•c N2", icon: "üåü", color: "#FFC107", milestoneCount: 40 },
            { id: "N1", label: "Chinh ph·ª•c N1", icon: "üëë", color: "#F44336", milestoneCount: 20 },
        ];
        const MOCK_USER_PROGRESS = { "N5": { completed: 2, current: 3 }, "N4": { completed: 0, current: 1 } };
        
        // --- STYLESHEET ---
        const styles = {
            appContainer: { display: 'flex', flexDirection: 'column', height: '100dvh', maxWidth: '600px', margin: 'auto', backgroundColor: '#FFF5F7', boxShadow: '0 0 10px rgba(0,0,0,0.1)', position: 'relative' },
            mainContent: { flex: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden' },
            screen: { padding: 16, display: 'flex', flexDirection: 'column', alignItems: 'center', width: '100%', boxSizing: 'border-box', flex: 1 },
            header: { padding: '16px', textAlign: 'center', flexShrink: 0 },
            headerTitle: { fontSize: 24, fontWeight: 'bold', color: '#5a3838' },
            backButton: { position: 'absolute', top: 16, left: 16, cursor: 'pointer', border: 'none', background: 'rgba(255,255,255,0.8)', borderRadius: '50%', width: 40, height: 40, zIndex: 30, fontSize: 20, color: '#FF6B8A', display: 'flex', justifyContent: 'center', alignItems: 'center' },
            loginContainer: { background: 'linear-gradient(180deg, #FFB7C5 0%, #FFF5F7 100%)', height: '100vh', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', padding: 24, boxSizing: 'border-box' },
            loginCard: { background: 'white', borderRadius: 20, padding: '32px 24px', boxShadow: '0 10px 15px -3px rgb(0 0 0 / 0.1)', width: '100%', maxWidth: '350px', textAlign: 'center' },
            logoText: { fontSize: 32, fontWeight: 'bold', color: '#FF6B8A', margin: '0 0 8px 0' },
            inputField: { width: '100%', padding: '12px 16px', border: '1px solid #D1D5DB', borderRadius: 8, marginTop: 16, boxSizing: 'border-box', fontSize: '16px' },
            loginButton: { backgroundColor: '#FF6B8A', padding: '12px', borderRadius: 8, textAlign: 'center', marginTop: 24, border: 'none', cursor: 'pointer', color: 'white', fontSize: 16, fontWeight: 'bold', width: '100%' },
            divider: { display: 'flex', alignItems: 'center', color: '#9CA3AF', margin: '24px 0' },
            dividerLine: { flex: 1, height: '1px', backgroundColor: '#E5E7EB' },
            googleButton: { display: 'flex', justifyContent: 'center', alignItems: 'center', width: '100%', padding: '12px', border: '1px solid #D1D5DB', borderRadius: 8, background: 'white', cursor: 'pointer', fontSize: '16px' },
            hubContainer: { display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', height: '100%', background: 'linear-gradient(180deg, #FFF5F7 0%, #FFDDE1 100%)', width: '100%', position: 'relative' },
            wheelContainer: { position: 'relative', width: 350, height: 250, display: 'flex', justifyContent: 'center', alignItems: 'center', margin: '20px 0' },
            menuItem: { position: 'absolute', width: 100, height: 120, display: 'flex', flexDirection: 'column', justifyContent: 'flex-start', alignItems: 'center', transition: 'all 0.5s ease-out', cursor: 'pointer' },
            itemContent: { display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', width: 80, height: 80, background: 'white', borderRadius: '50%', boxShadow: '0 4px 10px rgba(0,0,0,0.1)', transition: 'all 0.3s ease' },
            menuIcon: { fontSize: 32 },
            menuLabel: { fontSize: 12, fontWeight: 'bold', color: '#5a3838', marginTop: 88, textAlign: 'center', position: 'absolute', width: '100%' },
            primaryButtonHub: { background: 'linear-gradient(45deg, #FF6B8A, #FF899D)', padding: '16px 40px', borderRadius: 50, textAlign: 'center', marginTop: 40, border: 'none', cursor: 'pointer', color: 'white', fontSize: 20, fontWeight: 'bold', animation: 'pulse 2s infinite' },
            milestoneListContainer: { flex: 1, width: '100%', overflowY: 'auto', padding: '0 16px 16px 16px' },
            milestoneItem: { display: 'flex', alignItems: 'center', padding: '12px', background: 'white', borderRadius: 12, marginBottom: 12, boxShadow: '0 2px 4px rgba(0,0,0,0.05)' },
            milestoneIcon: { fontSize: 28, marginRight: 16 },
            milestoneTitle: { flex: 1, fontSize: 16, color: '#374151', fontWeight: '500' },
        };
        
        // --- C√ÅC COMPONENT ---
        const LoginScreen = ({ onLogin }) => ( <div style={styles.loginContainer}><div style={styles.loginCard}><h1 style={styles.logoText}>üå∏ Sakura Quest</h1><p>ƒêƒÉng nh·∫≠p ƒë·ªÉ b·∫Øt ƒë·∫ßu h√†nh tr√¨nh</p><input type="text" placeholder="Email ho·∫∑c S·ªë ƒëi·ªán tho·∫°i" style={styles.inputField} /><input type="password" placeholder="M·∫≠t kh·∫©u" style={styles.inputField} /><button style={styles.loginButton} onClick={onLogin}>ƒêƒÉng nh·∫≠p</button><div style={styles.divider}><div style={styles.dividerLine}></div><span>HO·∫∂C</span><div style={styles.dividerLine}></div></div><button style={styles.googleButton} onClick={onLogin}>ƒêƒÉng nh·∫≠p v·ªõi Google</button></div></div> );
        const FeatureScreen = ({ screenName, onBack }) => ( <div style={{...styles.screen, justifyContent: 'flex-start'}}><div style={{width: '100%'}}><button style={styles.backButton} onClick={onBack}>&larr;</button><header style={{...styles.header, padding: '16px'}}><h1 style={styles.headerTitle}>{screenName}</h1></header><p>N·ªôi dung c·ªßa ch·ª©c nƒÉng "{screenName}" s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y.</p></div></div> );
        const CircularMenu = ({ onNavigate, menuItems }) => { const [rotation, setRotation] = useState(0); const intervalRef = useRef(null); const numItems = menuItems.length; const anglePerItem = 360 / numItems; const activeIndex = Math.round((-rotation % 360) / anglePerItem + numItems) % numItems; useEffect(() => { intervalRef.current = setInterval(() => { setRotation(prev => prev - 0.4); }, 50); return () => clearInterval(intervalRef.current); }, []); return ( <div style={styles.hubContainer}><div style={styles.wheelContainer}>{menuItems.map((item, index) => { const itemAngle = index * anglePerItem + rotation; const rad = itemAngle * (Math.PI / 180); const radiusX = 130; const radiusY = 90; const x = radiusX * Math.sin(rad); const y = -radiusY * Math.cos(rad); const scale = (y + radiusY) / (2 * radiusY) * 0.6 + 0.7; const zIndex = Math.round(scale * 100); const isActive = index === activeIndex; const itemStyle = { ...styles.menuItem, top: '50%', left: '50%', transform: `translate(-50%, -50%) translate(${x}px, ${y}px) scale(${scale})`, zIndex: zIndex }; const contentStyle = {...styles.itemContent, borderColor: item.color || '#FF6B8A', borderWidth: isActive ? '3px' : '1px', borderStyle: 'solid'}; return ( <div key={item.id} style={itemStyle} onClick={() => onNavigate(item.id)}><div style={contentStyle}><span style={styles.menuIcon}>{item.icon}</span></div><p style={{...styles.menuLabel, color: isActive ? item.color || '#FF6B8A' : '#5a3838', opacity: isActive ? 1 : 0.7 }}>{item.label}</p></div> ); })}</div><button style={styles.primaryButtonHub} onClick={() => onNavigate(menuItems[activeIndex].id)}> B·∫Øt ƒë·∫ßu </button></div> ); };
        const SakuraFallOverlay = () => { return <div className="sakura-fall-overlay">{[...Array(50)].map((_, i) => <div key={i} className="sakura-petal" style={{left: `${Math.random() * 100}vw`, animationDelay: `${Math.random() * 10}s`, animationDuration: `${8 + Math.random() * 7}s`}}></div>)}</div>; };
        
        const LevelDetailScreen = ({ levelId, onBack, onStartMilestone }) => {
            const levelConfig = ROADMAP_LEVELS.find(l => l.id === levelId);
            const userProgress = MOCK_USER_PROGRESS[levelId] || { completed: 0, current: 1 };
            const milestones = Array.from({ length: levelConfig.milestoneCount }, (_, i) => ({ order: i + 1, id: `${levelId.toLowerCase()}_milestone_${(i + 1).toString().padStart(3, '0')}` }));

            return (
                <div style={{...styles.appContainer, backgroundColor: '#FFF5F7'}}>
                    <header style={{...styles.header, position: 'sticky', top: 0, width: '100%', background: 'rgba(255, 245, 247, 0.8)', backdropFilter: 'blur(5px)'}}>
                        <button style={{...styles.backButton, top: '8px', left: '8px'}} onClick={onBack}>&larr;</button>
                        <h1 style={styles.headerTitle}>{levelConfig.name}</h1>
                    </header>
                    <div style={styles.milestoneListContainer}>
                        <div style={{padding: 16}}>
                            {milestones.map(milestone => {
                                const isCompleted = milestone.order <= userProgress.completed;
                                const isCurrent = milestone.order === userProgress.current;
                                let icon = 'üîí';
                                let color = '#9E9E9E';

                                if (isCompleted) {
                                    icon = 'üîì';
                                    color = '#4CAF50';
                                } else if (isCurrent) {
                                    icon = 'üîí';
                                    color = '#FF6B8A';
                                }
                                
                                return (
                                    <div key={milestone.order} style={{...styles.milestoneItem, borderLeft: `5px solid ${color}`, cursor: isCurrent ? 'pointer' : 'default'}} onClick={() => isCurrent && onStartMilestone(milestone)}>
                                        <span style={{...styles.milestoneIcon, color: color}} className={isCurrent ? 'current-milestone-pulse' : ''}>{icon}</span>
                                        <p style={styles.milestoneTitle}>C·ªôt m·ªëc {milestone.order}</p>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
        };
        
        // --- COMPONENT APP CH√çNH ---
        function App() {
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [currentScreen, setCurrentScreen] = useState('Hub'); 
            const [selectedLevel, setSelectedLevel] = useState(null);

            if (!isLoggedIn) {
                return <LoginScreen onLogin={() => setIsLoggedIn(true)} />;
            }
            
            const handleNavigateToLevel = (levelId) => {
                setSelectedLevel(levelId);
                setCurrentScreen('LevelDetail');
            };

            const renderContent = () => {
                switch(currentScreen) {
                    case 'Hub':
                        return <CircularMenu onNavigate={(screen) => setCurrentScreen(screen)} menuItems={MENU_ITEMS} />;
                    case 'Roadmap':
                        return <CircularMenu onNavigate={handleNavigateToLevel} menuItems={ROADMAP_LEVELS} />;
                    case 'LevelDetail':
                        return <LevelDetailScreen levelId={selectedLevel} onBack={() => setCurrentScreen('Roadmap')} onStartMilestone={(m) => alert(`B·∫Øt ƒë·∫ßu C·ªôt m·ªëc ${m.order}`)} />
                    default:
                        return <FeatureScreen screenName={currentScreen} onBack={() => setCurrentScreen('Hub')} />;
                }
            }

            return (
                <div style={styles.appContainer}>
                    <div style={styles.mainContent}>
                        {currentScreen === 'Hub' || currentScreen === 'Roadmap' ? <SakuraFallOverlay /> : null}
                        {renderContent()}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
</body>
</html>
